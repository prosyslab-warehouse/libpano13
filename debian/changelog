libpano13 (2.9.15~beta2-1) experimental; urgency=low

  * New upstream version.
  * Drop patches applied upstream:
    + 20_libpano13+kbsd.diff
    + 30_undo_soname.bump
  * 20_bumpsoname.diff: Bump soname, now that the ABI really has changed.
  * Change library packagename to match soname.
  * Tighten libpano13-2 shlibs file to exactly match upstream version while
    still preserving binNMU-ability. Upstream might break the ABI another time
    without wanting to change the soname again before 2.9.15 is finally
    released. This tight dependency should be removed after the final release.

 -- Andreas Metzler <ametzler@debian.org>  Thu, 17 Sep 2009 15:20:46 +0200

libpano13 (2.9.15~beta1-1) experimental; urgency=low

  * New upstream pre-release.
    + debian/patches/30_undo_soname.bump - Undo unnecessary soname change.
    + Bump shlibs. (Newly added function.)
    + Ship newly available pkgconfig file.
  * Run upstream testsuite. Since it requires tiffcmp add libtiff-tools to
    build-depends. The upstream tarball is incomplete, it is missing some
    reference files for the testsuite. Pull them from upstream SVN and add
    them to the (repackaged) tarball.

 -- Andreas Metzler <ametzler@debian.org>  Mon, 14 Sep 2009 10:29:22 +0200

libpano13 (2.9.14-2) unstable; urgency=low

  * Stop shipping la file in -dev package. (Squeeze release goal).
  * debian/patches/20_libpano13+kbsd.diff - Fix FTBFS on GNU/kFreeBSD. Patch
    by Cyril Brulebois. Closes: #543998

 -- Andreas Metzler <ametzler@debian.org>  Sat, 29 Aug 2009 14:36:20 +0200

libpano13 (2.9.14-1) unstable; urgency=low

  * Upload to unstable.
  * [Lintian] Fix typo in debian control: s/algorithmical/algorithmic/.
  * Standards-Version: 3.8.2, no changes required.
  * Improve on watchfile to handle rc and beta versions.

 -- Andreas Metzler <ametzler@debian.org>  Sun, 09 Aug 2009 14:01:24 +0200

libpano13 (2.9.14~rc1-1) experimental; urgency=low

  * New upstream prerelease.
    + New soname due to ABI breakage (new member in public struct). Change
      package name of library package.
    + Does not contain non-free files PixMap.c PixMap.h, no need for .dfsg
      version anymore. Also does away with the need for a complex
      get-orig-source
      target.
    + debian/manpages/* now shipped in upstream-tarball. Adapt build-system
      accordingly.
  * [lintian] Add ${misc:Depends}.
  * Standards version 3.8.1.
    + [debian/control] Add Homepage field.
    + Add rudimentary debian/README.source, basically pointing to quilt
      documentation.

 -- Andreas Metzler <ametzler@debian.org>  Sun, 03 May 2009 19:56:34 +0200

libpano13 (2.9.12.dfsg-2) unstable; urgency=low

  * Drop Java support altogether (Closes: #477884). While checking that
    bugreport, it appeared that “HasJava” is only used in a single source
    file, which happens to be commented out.
     - debian/control: Drop libgcj-dev from Build-Depends.
     - debian/rules: Turn “--with-java” into “--without-java”.
     - debian/rules: Not bumping shlibs since no symbols changed (as
       expected given the above explanation).
  * Update my mail address in Uploaders.

 -- Cyril Brulebois <kibi@debian.org>  Sat, 26 Apr 2008 12:29:49 +0200

libpano13 (2.9.12.dfsg-1) unstable; urgency=low

  * Initial release (Closes: #433261), based on libpano12/2.8.6-0.1.
  * Repack because of the license of PixMap.{c,h}. These files seem to be
    needed only on Mac anyway:
     - Add a get-orig-source target to debian/rules.
     - Add version mangling to debian/watch.
  * The following glitches have been forwarded upstream so that these
    files will get proper copyright and license statements in further
    releases:
     - Copyright years are missing for jpegicc.{c,h}.
     - Copyright and license are missing for f2c.h. This file is available
       in the libf2c2 source package, and its copyright file has been used
       to complete this one.
     - Copyright and license are missing for rgbe.{c,h}. These files are
       available in the enblend source package, and its copyright file has
       been used to complete this one. The copyright by Bruce Walter is
       the original copyright notice, these files are now public domain.
  * Move from libpano12 to libpano13:
     - Update debian/copyright.
     - Update debian/watch, get rid of “debian uupdate”.
     - Update package names in debian/control, and clear the following
       fields: Provides, Conflicts, Replaces.
     - Add  “Conflicts: libpano12-bin” and “Replaces: libpano12-bin” to
       libpano13-bin.
     - Rename debian/libpano12* into debian/libpano13*.
     - Update debian/libpano13-bin.install:
        - Rename pano12info into panoinfo.
        - Rename PTOptimizer into PToptimizer.
     - Update debian/libpano13-bin.manpages accordingly.
     - Rename the manpages accordingly.
     - Update debian/manpages/panoinfo.1.
     - Update debian/manpages/PToptimizer.1.
  * debian/rules adjustments:
     - Delete unneeded variable declarations (major, version).
     - Delete useless comments.
     - Delete trailing spaces.
  * Move Maintainer to the pkg-phototools team, add Florent Bayle and
    myself to Uploaders.
  * Bump Standards-Version to 3.7.3 (no change needed).
  * Add Vcs-Git and Vcs-Browser. Note that both libpano12 and libpano13
    are maintained within the same libpano.git repository.
  * Bump debhelper compatibility from 4 to 5. Changes needed:
     - Remove “usr/lib/pkgconfig/*” from debian/libpano13-dev.install
       since “--fail-missing” is now the default behaviour of dh_install.
  * Use “LDFLAGS="-Wl,--as-needed"” on the ./configure line to avoid extra
    linking.
  * To achieve that, it is needed to patch config/ltmain.sh (libtool)
    because of very long-standing (and will-be-very-long-standing) libtool
    bug, see #347650:
     - Add quilt as Build-Depends, and to debian/rules.
     - Add 10_workaround_libtool_link_as_needed_bug to workaround libtool
       bug.
     - Add a TODO item about that bug, basically “keep an eye on it in
       case it ever gets fixed”.
  * Since that might break things sometimes, add “-Wl,-z,defs” before
    “-Wl,--as-needed”, so as to catch undefined references as early as
    possible in the build process. That done, it appears that “-lm” is
    missing, thus: add “LIBS="-lm"” on the ./configure line.
  * Remove debian/*.dirs files, since they aren't needed.
  * Clear the rpath set on some architectures (e.g. amd64) instead of
    relibtoolizing (at least at the moment):
     - Add chrpath to Build-Depends.
     - Add “chrpath -d” calls on debian/tmp/usr/{bin/*,lib/*.so} after
       the “make install” call.
     - Add a TODO item about that.
  * Switch from plain debhelper to cdbs. The build is conventional enough
    to drop lengthy makefiles in favour of shorter ones:
     - Add cdbs to Build-Depends.
     - Add autotools-dev as well, to get config.{guess,sub} updated during
       the build.
     - Use only some includes and variables in debian/rules, but keep the
       additional get-orig-source target.
     - Drop debian/libpano13-0.docs, cdbs is smart enough to install those
       files.
     - A single trick is needed: dh_install is called for each binary
       when using debhelper.mk, which makes the use of “--*-missing” a
       bit tricky. That's why a hook between “make install” and “dh_*”
       is needed, removing the RPATH's as well running dh_install with
       one of the “--*-missing” option. This is cdbs's #461368.
  * Ship all binaries, using a wildcard in debian/libpano13-bin.install.
  * Update the long description of libpano13-bin accordingly, listing all
    binaries along with an oneliner description for each.
  * Write manpages for all binaries, in the perlpod format. Generate them
    using pod2man at build-time. Ship them through libpano13.manpages, by
    using a wildcard.
  * Get rid of strange (strictly-versioned) interdependencies, leading to
    a dependency loop:
     - Remove “Suggests: libpano13-dev” from libpano13-0.
     - Downgrade “Recommends: libpano13-bin” to a “Suggests:”, still in
       libpano13-0.

 -- Cyril Brulebois <cyril.brulebois@enst-bretagne.fr>  Thu, 24 Jan 2008 23:37:28 +0100
